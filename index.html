<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>markdown-it-anchor test</title>

    <style>
        body {
            scroll-behavior: smooth;
        }

        .markdown-content {
            width: 40%;
            /* height: 90%; */
            /* margin-right: 50px; */
        }

        /* More about scroll-behavior @ <https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-behavior> */
    </style>

</head>

<body>
    <!-- <script src="https://unpkg.com/markdown-it/dist/markdown-it.min.js"></script>
    <script src="https://unpkg.com/markdown-it-anchor/dist/markdownItAnchor.umd.js"></script>
    <script src="https://unpkg.com/markdown-it-toc-done-right/dist/markdownItTocDoneRight.umd.js"></script> -->
    <script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>

    <!-- text/markdown isn't a standard, but has an informational rfc @ <https://tools.ietf.org/html/rfc7763> -->
    
    <p><a href="https://github.com/hwzhang9/testmd" target="_blank">github/testmd</a></p>
    <div style="display: flex;">
        <textarea id="markdowntext" class="markdown-content"></textarea>
        <button style="height: 20px;" id="btn">conversion</button>
        <div id="markdownPreview" class="markdown-content"></div>
    </div>

    <script id="md" type="text/markdown">
# 第一个 Case

# 产品手册指南

[如何更新本手册？](#如何更新本手册？)

[如何生成HTML版本的手册？](#如何生成HTML版本的手册？)

[如何生成PDF版本的手册？](#如何生成PDF版本的手册？)

[test](#test)


- [x] This task is done
- [ ] This is still pending


![avatar](./1.jpeg)

推荐生成 HTML 格式的文档浏览。

## 如何更新本手册？

1. 修改要更新的章节对应的 md 文件
2. 执行根目录下的 bash 文件：`./merge-man.sh`，将最新的各章节内容合并到`mnos-user-manual.md`中
3. 将各个 md 文件修改更新到 git 仓库

## 如何生成HTML版本的手册？

1. 修改要更新的章节对应的 md 文件
2. 执行根目录下的 bash 文件：`./merge-man.sh`，将最新的各章节内容合并到`mnos-user-manual.md`中
3. 将各个 md 文件修改更新到 git 仓库


## 如何生成PDF版本的手册？

1. 修改要更新的章节对应的 md 文件
2. 执行根目录下的 bash 文件：`./merge-man.sh`，将最新的各章节内容合并到`mnos-user-manual.md`中
3. 将各个 md 文件修改更新到 git 仓库

## test

1. 修改要更新的章节对应的 md 文件
2. 执行根目录下的 bash 文件：`./merge-man.sh`，将最新的各章节内容合并到`mnos-user-manual.md`中
3. 将各个 md 文件修改更新到 git 仓库


    </script>
    <script>

        // var uslugify = function (s) {
        //     return window.uslug(s);
        // }

        // var md = window.markdownit();
        // md.use(window.markdownItAnchor, { permalink: true, permalinkBefore: true, permalinkSymbol: '§' })
        //     .use(window.markdownItTocDoneRight);
        // document.body.innerHTML = md.render(document.getElementById("md").innerHTML);
        var myext = {
            type: 'output',
            filter: function (text, converter, options) {
                // ... do stuff to text ...
                console.log(text, converter, options);
                return text;
            }
        };
        var converter = new showdown.Converter({
            tasklists: true,
            extensions: [myext]
        });
        var markdowntext = document.getElementById("markdowntext");
        // html = converter.makeHtml(text);
        markdowntext.value = document.getElementById("md").innerHTML;
        // console.log(document.getElementById("markdowntext").value);
        var text = markdowntext.value;
        var html = converter.makeHtml(text);
        // console.log(converter, text);
        document.getElementById("markdownPreview").innerHTML = html;
        // document.body.innerHTML = html;
        markdowntext.addEventListener('input', btnAction, true);
        document.getElementById('btn').addEventListener('click', btnAction, true);
        function btnAction() {
            console.log(1);
            // var converter = new showdown.Converter();
            var text = document.getElementById("markdowntext").value;
            var html = converter.makeHtml(text);
            document.getElementById("markdownPreview").innerHTML = html;
        }


    </script>
</body>

</html>
